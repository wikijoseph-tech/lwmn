import{_ as B,u as N,m as V,p as q,q as A,r,o as D,s as E,a as i,c as l,b as t,t as c,e as x,F as T,f as L,n as j,i as C,x as z,y as F,j as M,z as U}from"./index.c1edbbd1.js";const W={class:"main-content"},G={class:"container-fluid"},H={class:"row row-sm"},O={class:"col-sm-12 col-md-12 col-xl-4"},P={class:"card custom-card"},R={class:"main-content-contacts pt-0 overflow-hidden"},Y={class:"main-content-left main-content-left-contacts border-0"},J={class:"nav main-nav-line main-nav-line-chat ss-3"},K={class:"nav-link active","data-bs-toggle":"tab",href:""},Q={class:"main-contacts-list"},X=["onClick"],Z={class:"main-contact-body"},tt={class:"phone"},st={key:0,class:"pulse"},et={class:"col-sm-12 col-md-12 col-xl-8"},at={class:""},nt={class:"main-content-body main-content-body-contacts card custom-card"},ot={class:"main-contact-info-header pt-3"},ct={class:"media"},it={class:"media-body"},lt={class:"main-contact-info-body p-4"},dt={class:"message-content"},rt={__name:"ato-chat",setup(I){const{t:_}=N(),e=V(),u=q(),v=A({}.VITE_WS_ENDPOINT,{path:"/ws",query:`token=${u.token}`}),m=r(0),a=r();async function $(n){m.value=n,a.value=s.value[n],await e.update_strategy(a.value.strategy_id),await e.get_strategy_his(),s.value=e.strategy}const p=n=>{const o={title:n.title,message:n.message,dt:n.dt,img:n.img};s.value.length>100&&s.value.splice(0,s.value.length-100),s.value.push(o),setTimeout(()=>{document.querySelector(".content-inner").scrollTop=1e5},500)};D(async()=>{await e.get_strategy_his(),s.value=e.strategy,a.value=s.value[0],v.on("channelB",p),setTimeout(()=>{document.querySelector(".content-inner").scrollTop=1e5},500)}),E(()=>{v.off("channelB",p)});const s=r([]);return(n,o)=>{var h,g,y,f,b,k;return i(),l("div",W,[t("div",G,[t("div",H,[t("div",O,[t("div",P,[t("div",R,[t("div",Y,[t("nav",J,[t("a",K,c(x(_)("STRATEGY.ALL")),1)]),t("div",Q,[(i(!0),l(T,null,L(s.value,(S,d)=>{var w;return i(),l("div",{key:d,class:j(["main-contact-item",{selected:m.value===d}]),onClick:pt=>$(d)},[o[0]||(o[0]=t("div",{class:"main-avatar online"},"DC",-1)),t("div",Z,[t("h6",null,c(S.title),1),t("span",tt,c(S.dt),1)]),(w=s.value[d].readers)!=null&&w.includes(x(u).token)?C("",!0):(i(),l("span",st))],10,X)}),128))])])])])]),t("div",et,[t("div",at,[t("div",nt,[t("div",ot,[t("div",ct,[o[1]||(o[1]=t("div",{class:"main-avatar online"},"S",-1)),t("div",it,[t("h5",null,c((h=a.value)==null?void 0:h.title),1),t("p",null,c((y=(g=a.value)==null?void 0:g.dt)==null?void 0:y.slice(0,19).replace("T"," ")),1)])])]),t("div",lt,[t("div",null,[(f=a.value)!=null&&f.img?(i(),z(F,{key:0,"image-src":`data:image/jpeg;base64,${(b=a.value)==null?void 0:b.img}`},null,8,["image-src"])):C("",!0),t("div",dt,c((k=a.value)==null?void 0:k.message),1)])])])])])])])])}}};var _t=B(rt,[["__scopeId","data-v-18f7a802"]]);const ut={class:"main-content app-content"},vt={class:"container-fluid"},mt={class:"row mt-4"},gt={__name:"pg-strategy",setup(I){return(_,e)=>(i(),l(T,null,[t("div",ut,[t("div",vt,[t("div",mt,[M(_t)])])]),e[0]||(e[0]=U('<footer class="footer mt-auto py-3 bg-white text-center"><div class="container"><span class="text-muted"> Copyright \xA9 <span id="year"></span>DCLH <span class="bi bi-heart-fill text-danger"></span> by <a href="javascript:void(0);"><span class="fw-semibold text-primary text-decoration-underline">Wiki</span></a></span></div></footer>',1))],64))}};export{gt as default};
